@if (isPageLoading()) {
  <app-loading-spinner />
} @else {
  <div class="auth-page">
    <div class="auth-center">
      <div class="glass-card auth-form">
        <h1 class="title">Welcome</h1>
        <p class="subtitle">Sign in to access your watchlist and personalised recommendations</p>

        <form (ngSubmit)="onSubmit()" #loginForm="ngForm" class="auth-inner">
          <div class="alerts">
            <div class="alert success" *ngIf="message">{{ message }}</div>
            <div class="alert error" *ngIf="error">{{ error }}</div>
          </div>

          <div class="field">
            <label for="email">Email</label>
            <input id="email" name="email" type="email" required [(ngModel)]="email" #emailModel="ngModel" placeholder="you@example.com" />
            <div class="error" *ngIf="emailModel.invalid && emailModel.touched">Please enter a valid email.</div>
          </div>

          <div class="field">
            <label for="password">Password</label>
            <input id="password" name="password" type="password" required minlength="6" [(ngModel)]="password" #pwModel="ngModel" placeholder="Enter your password" />
            <div class="error" *ngIf="pwModel.invalid && pwModel.touched">Password is required (min 6 chars).</div>
          </div>

          <button type="submit" class="cta" [disabled]="loginForm.invalid">Sign In</button>

          <div class="auth-footer">
            <a class="forgot" routerLink="/auth/register" href="/auth/register">Create an account</a>
          </div>

          <hr class="hra" data-content="OR">

          <button type="button" class="google-btn" (click)="signInWithGoogle()">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo" />
            <span>Sign in with Google</span>
          </button>
        </form>
      </div>
    </div>
  </div>
}